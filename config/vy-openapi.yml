info:
  title: Vayu API
  version: 1.0.0
  description: >-
    The Vayu API is a RESTful API that allows you to submit events for
    processing and storage & manage billing related entities.
              The API is secured using the Bearer Authentication scheme with JWT tokens.
              To obtain a JWT token, please contact Vayu at team@withvayu.com
  contact:
    email: dev@withvayu.com
    name: Vayu, Inc
    url: https://withvayu.com
openapi: 3.0.0
servers:
  - url: https://connect.withvayu.com
    description: Production server
  - url: https://staging-connect.withvayu.com
    description: Sandbox server
tags:
  - name: auth
    description: The auth tag is used for endpoints related to authentication and
      authorization.
  - name: events
    description: The events tag is used for endpoints related to event ingestion.
  - name: customers
    description: The customers tag is used for endpoints related to customer management.
  - name: meters
    description: The meters tag is used for endpoints related to meter management.
  - name: plans
    description: The plans tag is used for endpoints related to plan management.
  - name: contracts
    description: The contracts tag is used for endpoints related to contract management.
  - name: invoices
    description: The invoices tag is used for endpoints related to invoice management.
  - name: billing-cycles
    description: The billing-cycles tag is used for endpoints related to billing
      cycle management.
  - name: reports
    description: The reports tag is used for endpoints related to report generation
  - name: integrations
    description: The integrations tag is used for endpoints related to integrations
      with external systems
  - name: credits
    description: The credits tag is used for endpoints related to credit management.
  - name: webhooks
    description: The webhooks tag is used for endpoints related to webhook management.
  - name: measurements
    description: The measurements tag is used for endpoints related to measurement
      management.
components:
  securitySchemes:
    BearerAuthorizer:
      type: http
      scheme: bearer
      bearerFormat: JWT
  requestBodies:
    CreateCustomerRequest:
      required: true
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/CreateCustomerRequest"
    UpdateCustomerRequest:
      required: true
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/UpdateCustomerRequest"
    UpdateProductRequest:
      required: true
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/UpdateProductRequest"
    CreateProductRequest:
      required: true
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/CreateProductRequest"
    UpdateMeasurementRequest:
      required: true
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/UpdateMeasurementRequest"
    CreateMeasurementRequest:
      required: true
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/CreateMeasurementRequest"
    UpdatePlanRequest:
      required: true
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/UpdatePlanRequest"
    CreatePlanRequest:
      required: true
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/CreatePlanRequest"
    UpdateContractRequest:
      required: true
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/UpdateContractRequest"
    CreateContractRequest:
      required: true
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/CreateContractRequest"
    UpdateInvoiceRequest:
      required: true
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/UpdateInvoiceRequest"
    CreateInvoiceRequest:
      required: true
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/CreateInvoiceRequest"
    LoginRequest:
      required: true
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/LoginRequest"
    EventsDryRunRequest:
      required: true
      description: >-
        An array of events following the EventInput schema. This request body
        should be included in the PUT request to '/events'
              Up to 1000 events or a total payload max size of 256KB
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/EventsDryRunRequest"
    SendEventsRequest:
      required: true
      description: >-
        An array of events following the EventInput schema. This request body
        should be included in the PUT request to '/events'
              Up to 1000 events or a total payload max size of 256KB
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/SendEventsRequest"
    NetSuiteSyncInvoicesRequest:
      required: true
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/NetSuiteSyncInvoicesRequest"
    NetSuiteExportSalesOrderRequest:
      required: true
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/NetSuiteExportSalesOrderRequest"
    GrantCreditsRequest:
      required: true
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/GrantCreditsRequest"
    DeductCreditsRequest:
      required: true
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/DeductCreditsRequest"
    WebhookSubscribeRequest:
      required: true
      description: Subscribe to webhooks and receive event notifications.
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/WebhookSubscribeRequest"
    ShareInvoicesRequest:
      required: true
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ShareInvoicesRequest"
    ReviseContractRequest:
      required: true
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ReviseContractRequest"
  responses:
    CreateCustomerResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/CreateCustomerResponse"
    ListCustomersResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ListCustomersResponse"
    GetCustomerResponse:
      description: response contains the customer matching the provided externalId
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/GetCustomerResponse"
    UpdateCustomerResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/UpdateCustomerResponse"
    DeleteCustomerResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/DeleteCustomerResponse"
    GetProductResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/GetProductResponse"
    UpdateProductResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/UpdateProductResponse"
    DeleteProductResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/DeleteProductResponse"
    ListProductsResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ListProductsResponse"
    CreateProductResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/CreateProductResponse"
    GetMeasurementResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/GetMeasurementResponse"
    UpdateMeasurementResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/UpdateMeasurementResponse"
    DeleteMeasurementResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/DeleteMeasurementResponse"
    ListMeasurementsResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ListMeasurementsResponse"
    CreateMeasurementResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/CreateMeasurementResponse"
    GetPlanResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/GetPlanResponse"
    UpdatePlanResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/UpdatePlanResponse"
    DeletePlanResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/DeletePlanResponse"
    ListPlansResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ListPlansResponse"
    CreatePlanResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/CreatePlanResponse"
    GetContractResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/GetContractResponse"
    UpdateContractResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/UpdateContractResponse"
    DeleteContractResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/DeleteContractResponse"
    ListContractsResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ListContractsResponse"
    CreateContractResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/CreateContractResponse"
    GetInvoiceResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/GetInvoiceResponse"
    UpdateInvoiceResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/UpdateInvoiceResponse"
    DeleteInvoiceResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/DeleteInvoiceResponse"
    ListInvoicesResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ListInvoicesResponse"
    CreateInvoiceResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/CreateInvoiceResponse"
    LoginResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/LoginResponse"
    EventsDryRunResponse:
      description: Events with their corresponding meter and customer data.
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/EventsDryRunResponse"
    QueryEventsResponse:
      description: response contains an array of events
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/QueryEventsResponse"
    SendEventsResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/SendEventsResponse"
    GetEventResponse:
      description: response contains the event matching the provided refId
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/GetEventResponse"
    DeleteEventResponse:
      description: Contains the event that was deleted
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/DeleteEventResponse"
    GetProductsUsageReportResponse:
      description: response contains the products usage report
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/GetProductsUsageReportResponse"
    GetCommitmentReportResponse:
      description: response contains the commitment report
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/GetCommitmentReportResponse"
    NetSuiteSyncInvoicesResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/NetSuiteSyncInvoicesResponse"
    RequestSuccess:
      description: RequestSuccess
    ListCreditLedgerEntriesResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ListCreditLedgerEntriesResponse"
    GetCustomerProductsConsumptionsResponse:
      description: response contains the products consumptions by the customer id
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/GetCustomerProductsConsumptionsResponse"
    ApproveInvoiceResponse:
      description: RequestSuccess
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ApproveInvoiceResponse"
  parameters: {}
  schemas:
    Address:
      type: object
      properties:
        country:
          type: string
          minLength: 1
        city:
          type: string
          minLength: 1
        addressText:
          type: string
          minLength: 1
        state:
          type: string
          minLength: 1
        postalCode:
          type: string
          minLength: 1
      description: The address of the customer
    Contact:
      type: object
      properties:
        name:
          type: string
          minLength: 1
        email:
          type: string
          format: email
        receiveInvoiceEmail:
          type: boolean
      required:
        - email
    CreateCustomerRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          description: The name of the customer
        aliases:
          type: array
          nullable: true
          items:
            type: string
            minLength: 1
          default: []
          description: The aliases of the customer used to match events to the customer.
        address:
          $ref: "#/components/schemas/Address"
        contacts:
          type: array
          items:
            $ref: "#/components/schemas/Contact"
          description: The contacts of the customer. Contact marked as primary is the
            target for invoice sharing.
        externalId:
          type: string
          minLength: 1
          description: The external ID of the customer
      required:
        - name
    CreateCustomerResponse:
      type: object
      properties:
        customer:
          type: object
          properties:
            name:
              type: string
              minLength: 1
              description: The name of the customer
            aliases:
              type: array
              nullable: true
              items:
                type: string
                minLength: 1
              default: []
              description: The aliases of the customer used to match events to the customer.
            address:
              $ref: "#/components/schemas/Address"
            contacts:
              type: array
              items:
                $ref: "#/components/schemas/Contact"
              description: The contacts of the customer. Contact marked as primary is the
                target for invoice sharing.
            externalId:
              type: string
              minLength: 1
              description: The external ID of the customer
            id:
              type: string
            createdAt:
              type: string
              format: date-time
            updatedAt:
              type: string
              format: date-time
          required:
            - name
            - id
            - createdAt
            - updatedAt
      required:
        - customer
    ListCustomersResponse:
      type: object
      properties:
        customers:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
                minLength: 1
                description: The name of the customer
              aliases:
                type: array
                nullable: true
                items:
                  type: string
                  minLength: 1
                default: []
                description: The aliases of the customer used to match events to the customer.
              address:
                $ref: "#/components/schemas/Address"
              contacts:
                type: array
                items:
                  $ref: "#/components/schemas/Contact"
                description: The contacts of the customer. Contact marked as primary is the
                  target for invoice sharing.
              externalId:
                type: string
                minLength: 1
                description: The external ID of the customer
              id:
                type: string
              createdAt:
                type: string
                format: date-time
              updatedAt:
                type: string
                format: date-time
            required:
              - name
              - id
              - createdAt
              - updatedAt
        total:
          type: number
        hasMore:
          type: boolean
        nextCursor:
          type: string
      required:
        - customers
        - total
        - hasMore
    GetCustomerResponse:
      type: object
      properties:
        customer:
          type: object
          properties:
            name:
              type: string
              minLength: 1
              description: The name of the customer
            aliases:
              type: array
              nullable: true
              items:
                type: string
                minLength: 1
              default: []
              description: The aliases of the customer used to match events to the customer.
            address:
              $ref: "#/components/schemas/Address"
            contacts:
              type: array
              items:
                $ref: "#/components/schemas/Contact"
              description: The contacts of the customer. Contact marked as primary is the
                target for invoice sharing.
            externalId:
              type: string
              minLength: 1
              description: The external ID of the customer
            id:
              type: string
            createdAt:
              type: string
              format: date-time
            updatedAt:
              type: string
              format: date-time
          required:
            - name
            - id
            - createdAt
            - updatedAt
      required:
        - customer
    UpdateCustomerRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          description: The name of the customer
        aliases:
          type: array
          nullable: true
          items:
            type: string
            minLength: 1
          default: []
          description: The aliases of the customer used to match events to the customer.
        address:
          $ref: "#/components/schemas/Address"
        contacts:
          type: array
          items:
            $ref: "#/components/schemas/Contact"
          description: The contacts of the customer. Contact marked as primary is the
            target for invoice sharing.
        externalId:
          type: string
          minLength: 1
          description: The external ID of the customer
      additionalProperties: false
    UpdateCustomerResponse:
      type: object
      properties:
        customer:
          type: object
          properties:
            name:
              type: string
              minLength: 1
              description: The name of the customer
            aliases:
              type: array
              nullable: true
              items:
                type: string
                minLength: 1
              default: []
              description: The aliases of the customer used to match events to the customer.
            address:
              $ref: "#/components/schemas/Address"
            contacts:
              type: array
              items:
                $ref: "#/components/schemas/Contact"
              description: The contacts of the customer. Contact marked as primary is the
                target for invoice sharing.
            externalId:
              type: string
              minLength: 1
              description: The external ID of the customer
            id:
              type: string
            createdAt:
              type: string
              format: date-time
            updatedAt:
              type: string
              format: date-time
          required:
            - name
            - id
            - createdAt
            - updatedAt
      required:
        - customer
    DeleteCustomerResponse:
      type: object
      properties:
        customer:
          type: object
          properties:
            name:
              type: string
              minLength: 1
              description: The name of the customer
            aliases:
              type: array
              nullable: true
              items:
                type: string
                minLength: 1
              default: []
              description: The aliases of the customer used to match events to the customer.
            address:
              $ref: "#/components/schemas/Address"
            contacts:
              type: array
              items:
                $ref: "#/components/schemas/Contact"
              description: The contacts of the customer. Contact marked as primary is the
                target for invoice sharing.
            externalId:
              type: string
              minLength: 1
              description: The external ID of the customer
            id:
              type: string
            createdAt:
              type: string
              format: date-time
            updatedAt:
              type: string
              format: date-time
            deletedAt:
              type: string
          required:
            - name
            - id
            - createdAt
            - updatedAt
            - deletedAt
      required:
        - customer
    AggregationOperator:
      type: string
      enum:
        - Count
        - Sum
        - Distinct
        - Max
        - Min
        - Average
        - First
        - Last
      description: The aggregation method defines how the events should be summed to
        represent a usage value.
    AggregationMethod:
      type: object
      properties:
        operator:
          $ref: "#/components/schemas/AggregationOperator"
        field:
          type: string
          description: The field inside the "data" property to apply the aggregation
            method to.
        instanceKey:
          type: string
          description: The fields that is used to group different events together when
            measuring the usage.
      required:
        - operator
      description: The aggregation method defines how the events should be summed to
        represent a usage value.
    CriterionOperator:
      type: string
      enum:
        - Equals
        - DoesntEqual
        - Has
        - In
        - Contains
        - DoesntContain
        - LargerThan
        - LowerThan
        - LowerEqualTo
        - LargerEqualTo
        - Exists
        - DoesntExists
    Criterion:
      type: object
      properties:
        field:
          type: string
          minLength: 1
        operator:
          $ref: "#/components/schemas/CriterionOperator"
        value:
          type: string
          minLength: 1
      required:
        - field
        - operator
        - value
    Condition:
      type: object
      properties:
        criterions:
          type: array
          items:
            $ref: "#/components/schemas/Criterion"
          minItems: 1
      required:
        - criterions
    Filter:
      type: object
      properties:
        conditions:
          type: array
          items:
            $ref: "#/components/schemas/Condition"
          minItems: 1
      required:
        - conditions
      description: >-
        The filter to apply to the events to be included in the meter.
            The filter object contains an array of Conditions, each condition represents a logical OR statement.
            Each condition contains an array of Criteria (criterions), each criterion represents a logical AND statement.
    PerUnitPricingConfiguration:
      type: object
      properties:
        price:
          type: number
          minimum: 0
        chunkSize:
          type: number
          minimum: 0
          exclusiveMinimum: true
      required:
        - price
    PerUnitPricing:
      type: object
      properties:
        pricingModel:
          type: string
          enum:
            - PerUnit
        priceConfiguration:
          $ref: "#/components/schemas/PerUnitPricingConfiguration"
      required:
        - pricingModel
        - priceConfiguration
    PriceTier:
      type: object
      properties:
        from:
          type: number
          minimum: 0
        to:
          type: number
          minimum: 0
        price:
          type: number
          minimum: 0
        flatRate:
          type: number
        chunkSize:
          type: number
      required:
        - from
        - to
        - price
    PriceTiersList:
      type: array
      items:
        $ref: "#/components/schemas/PriceTier"
      minItems: 1
    TiersPricingConfiguration:
      type: object
      properties:
        tiers:
          $ref: "#/components/schemas/PriceTiersList"
        isVolume:
          type: boolean
          default: false
        isFlatRate:
          type: boolean
          default: false
        isChunked:
          type: boolean
          default: false
        isRevShare:
          type: boolean
          default: false
        useInfinity:
          type: boolean
          default: false
      required:
        - tiers
    TiersPricing:
      type: object
      properties:
        pricingModel:
          type: string
          enum:
            - Tiers
        priceConfiguration:
          $ref: "#/components/schemas/TiersPricingConfiguration"
      required:
        - pricingModel
        - priceConfiguration
    TieredSubscriptionPricingConfiguration:
      type: object
      properties:
        tiers:
          $ref: "#/components/schemas/PriceTiersList"
        isVolume:
          type: boolean
          default: true
        maxUnits:
          type: number
        useInfinity:
          type: boolean
          default: false
      required:
        - tiers
        - isVolume
    TieredSubscriptionPricing:
      type: object
      properties:
        pricingModel:
          type: string
          enum:
            - TieredSubscription
        priceConfiguration:
          $ref: "#/components/schemas/TieredSubscriptionPricingConfiguration"
      required:
        - pricingModel
        - priceConfiguration
    OneTimePricingConfiguration:
      type: object
      properties:
        price:
          type: number
        shouldCreateSeparateInvoice:
          type: boolean
          default: false
        discountConfiguration:
          type: object
          properties:
            name:
              type: string
              minLength: 1
            type:
              anyOf:
                - type: string
                  enum:
                    - Fixed
                - type: string
                  enum:
                    - Percentage
            amountToDeduct:
              type: number
              minimum: 1
          required:
            - name
            - type
            - amountToDeduct
      required:
        - price
        - shouldCreateSeparateInvoice
    OneTimePricing:
      type: object
      properties:
        pricingModel:
          type: string
          enum:
            - FixedOneTime
        priceConfiguration:
          $ref: "#/components/schemas/OneTimePricingConfiguration"
      required:
        - pricingModel
        - priceConfiguration
    RecurringPricingConfiguration:
      type: object
      properties:
        price:
          type: number
          minimum: 0
        upfrontPay:
          type: boolean
          default: false
        shouldCreateSeparateInvoice:
          type: boolean
          default: false
        installments:
          type: integer
          minimum: 0
        seats:
          type: integer
          minimum: 0
        discountConfiguration:
          type: object
          properties:
            name:
              type: string
              minLength: 1
            type:
              anyOf:
                - type: string
                  enum:
                    - Fixed
                - type: string
                  enum:
                    - Percentage
            amountToDeduct:
              type: number
              minimum: 1
          required:
            - name
            - type
            - amountToDeduct
      required:
        - price
        - upfrontPay
        - shouldCreateSeparateInvoice
    RecurringPricing:
      type: object
      properties:
        pricingModel:
          type: string
          enum:
            - Subscription
        priceConfiguration:
          $ref: "#/components/schemas/RecurringPricingConfiguration"
      required:
        - pricingModel
        - priceConfiguration
    CommercialTermsPricingConfiguration:
      type: object
      properties:
        price:
          type: number
          minimum: 0
        shouldCreateSeparateInvoice:
          type: boolean
          default: false
        shouldSplitAmount:
          type: boolean
          default: false
        discountConfiguration:
          type: object
          properties:
            name:
              type: string
              minLength: 1
            type:
              anyOf:
                - type: string
                  enum:
                    - Fixed
                - type: string
                  enum:
                    - Percentage
            amountToDeduct:
              type: number
              minimum: 1
          required:
            - name
            - type
            - amountToDeduct
      required:
        - price
        - shouldCreateSeparateInvoice
        - shouldSplitAmount
    CommercialTermsPricing:
      type: object
      properties:
        pricingModel:
          type: string
          enum:
            - CommercialTerms
        priceConfiguration:
          $ref: "#/components/schemas/CommercialTermsPricingConfiguration"
      required:
        - pricingModel
        - priceConfiguration
    CommissionPricingConfiguration:
      type: object
      properties:
        percentage:
          type: number
          minimum: 0.01
      required:
        - percentage
    CommissionPricing:
      type: object
      properties:
        pricingModel:
          type: string
          enum:
            - Commission
        priceConfiguration:
          $ref: "#/components/schemas/CommissionPricingConfiguration"
      required:
        - pricingModel
        - priceConfiguration
    RefundPricingConfiguration:
      type: object
      properties:
        price:
          type: number
        shouldCreateSeparateInvoice:
          type: boolean
          default: false
      required:
        - price
        - shouldCreateSeparateInvoice
    RefundPricing:
      type: object
      properties:
        pricingModel:
          type: string
          enum:
            - Refund
        priceConfiguration:
          $ref: "#/components/schemas/RefundPricingConfiguration"
      required:
        - pricingModel
        - priceConfiguration
    FixedDeductionPricingConfiguration:
      type: object
      properties:
        amountToDeduct:
          type: number
          minimum: 0
        installments:
          type: integer
          minimum: 0
      required:
        - amountToDeduct
    FixedDeductionPricing:
      type: object
      properties:
        pricingModel:
          type: string
          enum:
            - FixedDeduction
        priceConfiguration:
          $ref: "#/components/schemas/FixedDeductionPricingConfiguration"
      required:
        - pricingModel
        - priceConfiguration
    PercentageDeductionPricingConfiguration:
      type: object
      properties:
        percentageToDeduct:
          type: number
          minimum: 1
        installments:
          type: integer
          minimum: 0
      required:
        - percentageToDeduct
    PercentageDeductionPricing:
      type: object
      properties:
        pricingModel:
          type: string
          enum:
            - PercentageDeduction
        priceConfiguration:
          $ref: "#/components/schemas/PercentageDeductionPricingConfiguration"
      required:
        - pricingModel
        - priceConfiguration
    Pricing:
      oneOf:
        - $ref: "#/components/schemas/PerUnitPricing"
        - $ref: "#/components/schemas/TiersPricing"
        - $ref: "#/components/schemas/TieredSubscriptionPricing"
        - $ref: "#/components/schemas/OneTimePricing"
        - $ref: "#/components/schemas/RecurringPricing"
        - $ref: "#/components/schemas/CommercialTermsPricing"
        - $ref: "#/components/schemas/CommissionPricing"
        - $ref: "#/components/schemas/RefundPricing"
        - $ref: "#/components/schemas/FixedDeductionPricing"
        - $ref: "#/components/schemas/PercentageDeductionPricing"
      discriminator:
        propertyName: pricingModel
        mapping:
          PerUnit: "#/components/schemas/PerUnitPricing"
          Tiers: "#/components/schemas/TiersPricing"
          TieredSubscription: "#/components/schemas/TieredSubscriptionPricing"
          FixedOneTime: "#/components/schemas/OneTimePricing"
          Subscription: "#/components/schemas/RecurringPricing"
          CommercialTerms: "#/components/schemas/CommercialTermsPricing"
          Commission: "#/components/schemas/CommissionPricing"
          Refund: "#/components/schemas/RefundPricing"
          FixedDeduction: "#/components/schemas/FixedDeductionPricing"
          PercentageDeduction: "#/components/schemas/PercentageDeductionPricing"
      description: The pricing data of the meter. The pricing data contains the
        pricing model and the pricing details.
    GetProductResponse:
      type: object
      properties:
        product:
          type: object
          properties:
            name:
              type: string
              minLength: 1
              description: The name of the meter
            eventName:
              type: string
              minLength: 1
              description: The name of the event that the meter is tracking.
            aggregationMethod:
              $ref: "#/components/schemas/AggregationMethod"
            filter:
              $ref: "#/components/schemas/Filter"
            pricing:
              $ref: "#/components/schemas/Pricing"
            id:
              type: string
            createdAt:
              type: string
              format: date-time
            updatedAt:
              type: string
              format: date-time
          required:
            - name
            - eventName
            - aggregationMethod
            - id
            - createdAt
            - updatedAt
      required:
        - product
    UpdateProductRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          description: The name of the meter
        eventName:
          type: string
          minLength: 1
          description: The name of the event that the meter is tracking.
        aggregationMethod:
          $ref: "#/components/schemas/AggregationMethod"
        filter:
          $ref: "#/components/schemas/Filter"
        pricing:
          $ref: "#/components/schemas/Pricing"
      additionalProperties: false
    UpdateProductResponse:
      type: object
      properties:
        product:
          type: object
          properties:
            name:
              type: string
              minLength: 1
              description: The name of the meter
            eventName:
              type: string
              minLength: 1
              description: The name of the event that the meter is tracking.
            aggregationMethod:
              $ref: "#/components/schemas/AggregationMethod"
            filter:
              $ref: "#/components/schemas/Filter"
            pricing:
              $ref: "#/components/schemas/Pricing"
            id:
              type: string
            createdAt:
              type: string
              format: date-time
            updatedAt:
              type: string
              format: date-time
          required:
            - name
            - eventName
            - aggregationMethod
            - id
            - createdAt
            - updatedAt
      required:
        - product
    DeleteProductResponse:
      type: object
      properties:
        product:
          type: object
          properties:
            name:
              type: string
              minLength: 1
              description: The name of the meter
            eventName:
              type: string
              minLength: 1
              description: The name of the event that the meter is tracking.
            aggregationMethod:
              $ref: "#/components/schemas/AggregationMethod"
            filter:
              $ref: "#/components/schemas/Filter"
            pricing:
              $ref: "#/components/schemas/Pricing"
            id:
              type: string
            createdAt:
              type: string
              format: date-time
            updatedAt:
              type: string
              format: date-time
            deletedAt:
              type: string
          required:
            - name
            - eventName
            - aggregationMethod
            - id
            - createdAt
            - updatedAt
            - deletedAt
      required:
        - product
    ListProductsResponse:
      type: object
      properties:
        products:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
                minLength: 1
                description: The name of the meter
              eventName:
                type: string
                minLength: 1
                description: The name of the event that the meter is tracking.
              aggregationMethod:
                $ref: "#/components/schemas/AggregationMethod"
              filter:
                $ref: "#/components/schemas/Filter"
              pricing:
                $ref: "#/components/schemas/Pricing"
              id:
                type: string
              createdAt:
                type: string
                format: date-time
              updatedAt:
                type: string
                format: date-time
            required:
              - name
              - eventName
              - aggregationMethod
              - id
              - createdAt
              - updatedAt
        total:
          type: number
        hasMore:
          type: boolean
        nextCursor:
          type: string
      required:
        - products
        - total
        - hasMore
    CreateProductRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          description: The name of the meter
        eventName:
          type: string
          minLength: 1
          description: The name of the event that the meter is tracking.
        aggregationMethod:
          $ref: "#/components/schemas/AggregationMethod"
        filter:
          $ref: "#/components/schemas/Filter"
        pricing:
          $ref: "#/components/schemas/Pricing"
      required:
        - name
        - eventName
        - aggregationMethod
    CreateProductResponse:
      type: object
      properties:
        product:
          type: object
          properties:
            name:
              type: string
              minLength: 1
              description: The name of the meter
            eventName:
              type: string
              minLength: 1
              description: The name of the event that the meter is tracking.
            aggregationMethod:
              $ref: "#/components/schemas/AggregationMethod"
            filter:
              $ref: "#/components/schemas/Filter"
            pricing:
              $ref: "#/components/schemas/Pricing"
            id:
              type: string
            createdAt:
              type: string
              format: date-time
            updatedAt:
              type: string
              format: date-time
          required:
            - name
            - eventName
            - aggregationMethod
            - id
            - createdAt
            - updatedAt
      required:
        - product
    FullDayPeriod:
      type: object
      properties:
        startTime:
          type: string
          format: date-time
        endTime:
          type: string
          format: date-time
      required:
        - startTime
        - endTime
      description: The period of the measurement
    GetMeasurementResponse:
      type: object
      properties:
        measurement:
          type: object
          properties:
            accountId:
              type: string
              pattern: ^[0-9a-fA-F]{24}$
              description: The id of the account that the measurement is associated with
            period:
              $ref: "#/components/schemas/FullDayPeriod"
            meterId:
              type: string
              pattern: ^[0-9a-fA-F]{24}$
              description: The id of the meter that the measurement is associated with
            customerId:
              type: string
              pattern: ^[0-9a-fA-F]{24}$
              description: The id of the customer that the measurement is associated with
            value:
              type: number
              minimum: 0
              description: The value of the measurement
            price:
              anyOf:
                - type: number
                - type: object
                  nullable: true
                  enum:
                    - null
                - nullable: true
              description: The price of the measurement
            measurementPriceId:
              anyOf:
                - type: string
                  pattern: ^[0-9a-fA-F]{24}$
                - type: object
                  nullable: true
                  enum:
                    - null
                - nullable: true
              description: The id of the measurement price that the measurement is associated
                with
            id:
              type: string
            createdAt:
              type: string
              format: date-time
            updatedAt:
              type: string
              format: date-time
          required:
            - accountId
            - period
            - meterId
            - customerId
            - value
            - id
            - createdAt
            - updatedAt
      required:
        - measurement
    UpdateMeasurementRequest:
      type: object
      properties:
        accountId:
          type: string
          pattern: ^[0-9a-fA-F]{24}$
          description: The id of the account that the measurement is associated with
        period:
          $ref: "#/components/schemas/FullDayPeriod"
        meterId:
          type: string
          pattern: ^[0-9a-fA-F]{24}$
          description: The id of the meter that the measurement is associated with
        customerId:
          type: string
          pattern: ^[0-9a-fA-F]{24}$
          description: The id of the customer that the measurement is associated with
        value:
          type: number
          minimum: 0
          description: The value of the measurement
        price:
          type: number
        measurementPriceId:
          type: string
          pattern: ^[0-9a-fA-F]{24}$
      additionalProperties: false
    UpdateMeasurementResponse:
      type: object
      properties:
        measurement:
          type: object
          properties:
            accountId:
              type: string
              pattern: ^[0-9a-fA-F]{24}$
              description: The id of the account that the measurement is associated with
            period:
              $ref: "#/components/schemas/FullDayPeriod"
            meterId:
              type: string
              pattern: ^[0-9a-fA-F]{24}$
              description: The id of the meter that the measurement is associated with
            customerId:
              type: string
              pattern: ^[0-9a-fA-F]{24}$
              description: The id of the customer that the measurement is associated with
            value:
              type: number
              minimum: 0
              description: The value of the measurement
            price:
              anyOf:
                - type: number
                - type: object
                  nullable: true
                  enum:
                    - null
                - nullable: true
              description: The price of the measurement
            measurementPriceId:
              anyOf:
                - type: string
                  pattern: ^[0-9a-fA-F]{24}$
                - type: object
                  nullable: true
                  enum:
                    - null
                - nullable: true
              description: The id of the measurement price that the measurement is associated
                with
            id:
              type: string
            createdAt:
              type: string
              format: date-time
            updatedAt:
              type: string
              format: date-time
          required:
            - accountId
            - period
            - meterId
            - customerId
            - value
            - id
            - createdAt
            - updatedAt
      required:
        - measurement
    DeleteMeasurementResponse:
      type: object
      properties:
        measurement:
          type: object
          properties:
            accountId:
              type: string
              pattern: ^[0-9a-fA-F]{24}$
              description: The id of the account that the measurement is associated with
            period:
              $ref: "#/components/schemas/FullDayPeriod"
            meterId:
              type: string
              pattern: ^[0-9a-fA-F]{24}$
              description: The id of the meter that the measurement is associated with
            customerId:
              type: string
              pattern: ^[0-9a-fA-F]{24}$
              description: The id of the customer that the measurement is associated with
            value:
              type: number
              minimum: 0
              description: The value of the measurement
            price:
              anyOf:
                - type: number
                - type: object
                  nullable: true
                  enum:
                    - null
                - nullable: true
              description: The price of the measurement
            measurementPriceId:
              anyOf:
                - type: string
                  pattern: ^[0-9a-fA-F]{24}$
                - type: object
                  nullable: true
                  enum:
                    - null
                - nullable: true
              description: The id of the measurement price that the measurement is associated
                with
            id:
              type: string
            createdAt:
              type: string
              format: date-time
            updatedAt:
              type: string
              format: date-time
            deletedAt:
              type: string
          required:
            - accountId
            - period
            - meterId
            - customerId
            - value
            - id
            - createdAt
            - updatedAt
            - deletedAt
      required:
        - measurement
    ListMeasurementsResponse:
      type: object
      properties:
        measurements:
          type: array
          items:
            type: object
            properties:
              accountId:
                type: string
                pattern: ^[0-9a-fA-F]{24}$
                description: The id of the account that the measurement is associated with
              period:
                $ref: "#/components/schemas/FullDayPeriod"
              meterId:
                type: string
                pattern: ^[0-9a-fA-F]{24}$
                description: The id of the meter that the measurement is associated with
              customerId:
                type: string
                pattern: ^[0-9a-fA-F]{24}$
                description: The id of the customer that the measurement is associated with
              value:
                type: number
                minimum: 0
                description: The value of the measurement
              price:
                anyOf:
                  - type: number
                  - type: object
                    nullable: true
                    enum:
                      - null
                  - nullable: true
                description: The price of the measurement
              measurementPriceId:
                anyOf:
                  - type: string
                    pattern: ^[0-9a-fA-F]{24}$
                  - type: object
                    nullable: true
                    enum:
                      - null
                  - nullable: true
                description: The id of the measurement price that the measurement is associated
                  with
              id:
                type: string
              createdAt:
                type: string
                format: date-time
              updatedAt:
                type: string
                format: date-time
            required:
              - accountId
              - period
              - meterId
              - customerId
              - value
              - id
              - createdAt
              - updatedAt
        total:
          type: number
        hasMore:
          type: boolean
        nextCursor:
          type: string
      required:
        - measurements
        - total
        - hasMore
    CreateMeasurementRequest:
      type: object
      properties:
        accountId:
          type: string
          pattern: ^[0-9a-fA-F]{24}$
          description: The id of the account that the measurement is associated with
        period:
          $ref: "#/components/schemas/FullDayPeriod"
        meterId:
          type: string
          pattern: ^[0-9a-fA-F]{24}$
          description: The id of the meter that the measurement is associated with
        customerId:
          type: string
          pattern: ^[0-9a-fA-F]{24}$
          description: The id of the customer that the measurement is associated with
        value:
          type: number
          minimum: 0
          description: The value of the measurement
        price:
          type: number
        measurementPriceId:
          type: string
          pattern: ^[0-9a-fA-F]{24}$
      required:
        - accountId
        - period
        - meterId
        - customerId
        - value
    CreateMeasurementResponse:
      type: object
      properties:
        measurement:
          type: object
          properties:
            accountId:
              type: string
              pattern: ^[0-9a-fA-F]{24}$
              description: The id of the account that the measurement is associated with
            period:
              $ref: "#/components/schemas/FullDayPeriod"
            meterId:
              type: string
              pattern: ^[0-9a-fA-F]{24}$
              description: The id of the meter that the measurement is associated with
            customerId:
              type: string
              pattern: ^[0-9a-fA-F]{24}$
              description: The id of the customer that the measurement is associated with
            value:
              type: number
              minimum: 0
              description: The value of the measurement
            price:
              anyOf:
                - type: number
                - type: object
                  nullable: true
                  enum:
                    - null
                - nullable: true
              description: The price of the measurement
            measurementPriceId:
              anyOf:
                - type: string
                  pattern: ^[0-9a-fA-F]{24}$
                - type: object
                  nullable: true
                  enum:
                    - null
                - nullable: true
              description: The id of the measurement price that the measurement is associated
                with
            id:
              type: string
            createdAt:
              type: string
              format: date-time
            updatedAt:
              type: string
              format: date-time
          required:
            - accountId
            - period
            - meterId
            - customerId
            - value
            - id
            - createdAt
            - updatedAt
      required:
        - measurement
    PlanStatus:
      type: string
      enum:
        - Active
        - Inactive
        - Error
      description: The status of the plan. plan statuses are active, inactive
    BillingInterval:
      type: string
      enum:
        - Monthly
        - BiMonthly
        - Quarterly
        - SixMonths
        - Yearly
    UnlimitedDuration:
      type: number
      enum:
        - -1
    PlanDuration:
      anyOf:
        - type: number
          minimum: 0
          exclusiveMinimum: true
        - $ref: "#/components/schemas/UnlimitedDuration"
    PaymentTerm:
      type: string
      enum:
        - Prepayment
        - Postpayment
      default: Postpayment
      description: flag to indicate if the payment is postpayment or prepayment
    PlanBillingData:
      type: object
      properties:
        billingInterval:
          $ref: "#/components/schemas/BillingInterval"
        duration:
          $ref: "#/components/schemas/PlanDuration"
        paymentTerm:
          $ref: "#/components/schemas/PaymentTerm"
        autoRenewal:
          type: boolean
          default: false
        proRated:
          type: boolean
          default: true
      required:
        - billingInterval
        - duration
        - paymentTerm
        - autoRenewal
        - proRated
      description: The billing data of the plan. The billing data contains the billing
        interval, the plan duration the payment terms and auto renewal, and the
        billing method.
    CreditProductConfiguration:
      type: object
      properties:
        shouldCreateSeparateInvoice:
          type: boolean
          default: false
      required:
        - shouldCreateSeparateInvoice
    CreditProductSettings:
      type: object
      properties:
        productType:
          type: string
          enum:
            - Credit
        productConfiguration:
          $ref: "#/components/schemas/CreditProductConfiguration"
      required:
        - productType
        - productConfiguration
    ServiceProductConfiguration:
      type: object
      properties: {}
    ServiceProductSettings:
      type: object
      properties:
        productType:
          type: string
          enum:
            - Service
        productConfiguration:
          $ref: "#/components/schemas/ServiceProductConfiguration"
      required:
        - productType
        - productConfiguration
    ProductSettings:
      oneOf:
        - $ref: "#/components/schemas/CreditProductSettings"
        - $ref: "#/components/schemas/ServiceProductSettings"
      discriminator:
        propertyName: productType
        mapping:
          Credit: "#/components/schemas/CreditProductSettings"
          Service: "#/components/schemas/ServiceProductSettings"
    NewProductVariant:
      type: object
      properties:
        meterId:
          type: string
          pattern: ^[0-9a-fA-F]{24}$
        pricing:
          $ref: "#/components/schemas/Pricing"
        settings:
          $ref: "#/components/schemas/ProductSettings"
        description:
          type: string
          minLength: 1
        name:
          type: string
          minLength: 1
      required:
        - pricing
        - name
    CommitmentType:
      type: string
      enum:
        - Price
        - Units
    ErpMetadata:
      type: object
      properties:
        erpId:
          type: string
          minLength: 1
        erpName:
          type: string
          minLength: 1
        displayId:
          type: string
          nullable: true
          minLength: 1
      required:
        - erpId
        - erpName
    NewProduct:
      type: object
      properties:
        name:
          type: string
          minLength: 1
        description:
          type: string
        variants:
          type: array
          items:
            $ref: "#/components/schemas/NewProductVariant"
          minItems: 1
        basePrice:
          type: number
          minimum: 0
        commitment:
          type: object
          properties:
            amount:
              type: number
              minimum: 0
            type:
              $ref: "#/components/schemas/CommitmentType"
            replenishmentInterval:
              anyOf:
                - type: number
                - type: object
                  nullable: true
                  enum:
                    - null
                - nullable: true
          required:
            - amount
            - type
        currencyCommitment:
          type: number
        paymentTerm:
          $ref: "#/components/schemas/PaymentTerm"
        billingInterval:
          $ref: "#/components/schemas/BillingInterval"
        accumulationInterval:
          type: number
        proRata:
          type: boolean
        erpMetadata:
          $ref: "#/components/schemas/ErpMetadata"
        rateMultiplier:
          type: number
        isPeriodicVariants:
          type: boolean
          default: false
      required:
        - variants
        - paymentTerm
        - billingInterval
    PlanTrial:
      type: object
      properties:
        duration:
          type: number
        type:
          type: string
          enum:
            - Weeks
            - Months
        free:
          type: boolean
          default: false
      required:
        - duration
        - type
        - free
    GetPlanResponse:
      type: object
      properties:
        plan:
          type: object
          properties:
            name:
              type: string
              minLength: 1
              description: The name of the plan
            status:
              $ref: "#/components/schemas/PlanStatus"
            billingData:
              $ref: "#/components/schemas/PlanBillingData"
            description:
              anyOf:
                - type: string
                  minLength: 1
                - type: object
                  nullable: true
                  enum:
                    - null
                - nullable: true
              description: The description of the plan
            products:
              type: array
              items:
                allOf:
                  - $ref: "#/components/schemas/NewProduct"
                  - type: object
                    properties: {}
              minItems: 1
              description: The products of the plan
            trial:
              anyOf:
                - $ref: "#/components/schemas/PlanTrial"
                - type: object
                  nullable: true
                  enum:
                    - null
                - nullable: true
              description: The trial duration of the plan
            basedFromPlanId:
              anyOf:
                - type: string
                - type: object
                  nullable: true
                  enum:
                    - null
                - nullable: true
              description: The plan ID that this plan is based on
            purchaseOrder:
              type: string
              maxLength: 20
              description: The purchase order number
            id:
              type: string
            createdAt:
              type: string
              format: date-time
            updatedAt:
              type: string
              format: date-time
          required:
            - id
            - createdAt
            - updatedAt
      required:
        - plan
    UpdatePlanRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          description: The name of the plan
        status:
          $ref: "#/components/schemas/PlanStatus"
        billingData:
          $ref: "#/components/schemas/PlanBillingData"
        description:
          type: string
          minLength: 1
        products:
          type: array
          items:
            allOf:
              - $ref: "#/components/schemas/NewProduct"
              - type: object
                properties: {}
          minItems: 1
          description: The products of the plan
        trial:
          $ref: "#/components/schemas/PlanTrial"
        basedFromPlanId:
          type: string
        purchaseOrder:
          type: string
          maxLength: 20
          description: The purchase order number
      additionalProperties: false
    UpdatePlanResponse:
      type: object
      properties:
        plan:
          type: object
          properties:
            name:
              type: string
              minLength: 1
              description: The name of the plan
            status:
              $ref: "#/components/schemas/PlanStatus"
            billingData:
              $ref: "#/components/schemas/PlanBillingData"
            description:
              anyOf:
                - type: string
                  minLength: 1
                - type: object
                  nullable: true
                  enum:
                    - null
                - nullable: true
              description: The description of the plan
            products:
              type: array
              items:
                allOf:
                  - $ref: "#/components/schemas/NewProduct"
                  - type: object
                    properties: {}
              minItems: 1
              description: The products of the plan
            trial:
              anyOf:
                - $ref: "#/components/schemas/PlanTrial"
                - type: object
                  nullable: true
                  enum:
                    - null
                - nullable: true
              description: The trial duration of the plan
            basedFromPlanId:
              anyOf:
                - type: string
                - type: object
                  nullable: true
                  enum:
                    - null
                - nullable: true
              description: The plan ID that this plan is based on
            purchaseOrder:
              type: string
              maxLength: 20
              description: The purchase order number
            id:
              type: string
            createdAt:
              type: string
              format: date-time
            updatedAt:
              type: string
              format: date-time
          required:
            - id
            - createdAt
            - updatedAt
      required:
        - plan
    DeletePlanResponse:
      type: object
      properties:
        plan:
          type: object
          properties:
            name:
              type: string
              minLength: 1
              description: The name of the plan
            status:
              $ref: "#/components/schemas/PlanStatus"
            billingData:
              $ref: "#/components/schemas/PlanBillingData"
            description:
              anyOf:
                - type: string
                  minLength: 1
                - type: object
                  nullable: true
                  enum:
                    - null
                - nullable: true
              description: The description of the plan
            products:
              type: array
              items:
                allOf:
                  - $ref: "#/components/schemas/NewProduct"
                  - type: object
                    properties: {}
              minItems: 1
              description: The products of the plan
            trial:
              anyOf:
                - $ref: "#/components/schemas/PlanTrial"
                - type: object
                  nullable: true
                  enum:
                    - null
                - nullable: true
              description: The trial duration of the plan
            basedFromPlanId:
              anyOf:
                - type: string
                - type: object
                  nullable: true
                  enum:
                    - null
                - nullable: true
              description: The plan ID that this plan is based on
            purchaseOrder:
              type: string
              maxLength: 20
              description: The purchase order number
            id:
              type: string
            createdAt:
              type: string
              format: date-time
            updatedAt:
              type: string
              format: date-time
            deletedAt:
              type: string
          required:
            - id
            - createdAt
            - updatedAt
            - deletedAt
      required:
        - plan
    ListPlansResponse:
      type: object
      properties:
        plans:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
                minLength: 1
                description: The name of the plan
              status:
                $ref: "#/components/schemas/PlanStatus"
              billingData:
                $ref: "#/components/schemas/PlanBillingData"
              description:
                anyOf:
                  - type: string
                    minLength: 1
                  - type: object
                    nullable: true
                    enum:
                      - null
                  - nullable: true
                description: The description of the plan
              products:
                type: array
                items:
                  allOf:
                    - $ref: "#/components/schemas/NewProduct"
                    - type: object
                      properties: {}
                minItems: 1
                description: The products of the plan
              trial:
                anyOf:
                  - $ref: "#/components/schemas/PlanTrial"
                  - type: object
                    nullable: true
                    enum:
                      - null
                  - nullable: true
                description: The trial duration of the plan
              basedFromPlanId:
                anyOf:
                  - type: string
                  - type: object
                    nullable: true
                    enum:
                      - null
                  - nullable: true
                description: The plan ID that this plan is based on
              purchaseOrder:
                type: string
                maxLength: 20
                description: The purchase order number
              id:
                type: string
              createdAt:
                type: string
                format: date-time
              updatedAt:
                type: string
                format: date-time
            required:
              - id
              - createdAt
              - updatedAt
        total:
          type: number
        hasMore:
          type: boolean
        nextCursor:
          type: string
      required:
        - plans
        - total
        - hasMore
    CreatePlanRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          description: The name of the plan
        status:
          $ref: "#/components/schemas/PlanStatus"
        billingData:
          $ref: "#/components/schemas/PlanBillingData"
        description:
          type: string
          minLength: 1
        products:
          type: array
          items:
            allOf:
              - $ref: "#/components/schemas/NewProduct"
              - type: object
                properties: {}
          minItems: 1
          description: The products of the plan
        trial:
          $ref: "#/components/schemas/PlanTrial"
        basedFromPlanId:
          type: string
        purchaseOrder:
          type: string
          maxLength: 20
          description: The purchase order number
    CreatePlanResponse:
      type: object
      properties:
        plan:
          type: object
          properties:
            name:
              type: string
              minLength: 1
              description: The name of the plan
            status:
              $ref: "#/components/schemas/PlanStatus"
            billingData:
              $ref: "#/components/schemas/PlanBillingData"
            description:
              anyOf:
                - type: string
                  minLength: 1
                - type: object
                  nullable: true
                  enum:
                    - null
                - nullable: true
              description: The description of the plan
            products:
              type: array
              items:
                allOf:
                  - $ref: "#/components/schemas/NewProduct"
                  - type: object
                    properties: {}
              minItems: 1
              description: The products of the plan
            trial:
              anyOf:
                - $ref: "#/components/schemas/PlanTrial"
                - type: object
                  nullable: true
                  enum:
                    - null
                - nullable: true
              description: The trial duration of the plan
            basedFromPlanId:
              anyOf:
                - type: string
                - type: object
                  nullable: true
                  enum:
                    - null
                - nullable: true
              description: The plan ID that this plan is based on
            purchaseOrder:
              type: string
              maxLength: 20
              description: The purchase order number
            id:
              type: string
            createdAt:
              type: string
              format: date-time
            updatedAt:
              type: string
              format: date-time
          required:
            - id
            - createdAt
            - updatedAt
      required:
        - plan
    GetContractResponse:
      type: object
      properties:
        contract:
          type: object
          properties:
            startDate:
              type: string
              description: The start date of the contract
              format: date-time
            endDate:
              type: string
              description: The end date of the contract
              format: date-time
            customerId:
              type: string
              pattern: ^[0-9a-fA-F]{24}$
              description: The id of the customer that the contract is associated with
            planId:
              type: string
              pattern: ^[0-9a-fA-F]{24}$
              description: The id of the plan that the contract is associated with
            id:
              type: string
            createdAt:
              type: string
              format: date-time
            updatedAt:
              type: string
              format: date-time
          required:
            - startDate
            - customerId
            - planId
            - id
            - createdAt
            - updatedAt
      required:
        - contract
    UpdateContractRequest:
      type: object
      properties:
        startDate:
          type: string
          description: The start date of the contract
          format: date-time
        endDate:
          type: string
          description: The end date of the contract
          format: date-time
        customerId:
          type: string
          pattern: ^[0-9a-fA-F]{24}$
          description: The id of the customer that the contract is associated with
        planId:
          type: string
          pattern: ^[0-9a-fA-F]{24}$
          description: The id of the plan that the contract is associated with
      additionalProperties: false
    UpdateContractResponse:
      type: object
      properties:
        contract:
          type: object
          properties:
            startDate:
              type: string
              description: The start date of the contract
              format: date-time
            endDate:
              type: string
              description: The end date of the contract
              format: date-time
            customerId:
              type: string
              pattern: ^[0-9a-fA-F]{24}$
              description: The id of the customer that the contract is associated with
            planId:
              type: string
              pattern: ^[0-9a-fA-F]{24}$
              description: The id of the plan that the contract is associated with
            id:
              type: string
            createdAt:
              type: string
              format: date-time
            updatedAt:
              type: string
              format: date-time
          required:
            - startDate
            - customerId
            - planId
            - id
            - createdAt
            - updatedAt
      required:
        - contract
    DeleteContractResponse:
      type: object
      properties:
        contract:
          type: object
          properties:
            startDate:
              type: string
              description: The start date of the contract
              format: date-time
            endDate:
              type: string
              description: The end date of the contract
              format: date-time
            customerId:
              type: string
              pattern: ^[0-9a-fA-F]{24}$
              description: The id of the customer that the contract is associated with
            planId:
              type: string
              pattern: ^[0-9a-fA-F]{24}$
              description: The id of the plan that the contract is associated with
            id:
              type: string
            createdAt:
              type: string
              format: date-time
            updatedAt:
              type: string
              format: date-time
            deletedAt:
              type: string
          required:
            - startDate
            - customerId
            - planId
            - id
            - createdAt
            - updatedAt
            - deletedAt
      required:
        - contract
    ListContractsResponse:
      type: object
      properties:
        contracts:
          type: array
          items:
            type: object
            properties:
              startDate:
                type: string
                description: The start date of the contract
                format: date-time
              endDate:
                type: string
                description: The end date of the contract
                format: date-time
              customerId:
                type: string
                pattern: ^[0-9a-fA-F]{24}$
                description: The id of the customer that the contract is associated with
              planId:
                type: string
                pattern: ^[0-9a-fA-F]{24}$
                description: The id of the plan that the contract is associated with
              id:
                type: string
              createdAt:
                type: string
                format: date-time
              updatedAt:
                type: string
                format: date-time
            required:
              - startDate
              - customerId
              - planId
              - id
              - createdAt
              - updatedAt
        total:
          type: number
        hasMore:
          type: boolean
        nextCursor:
          type: string
      required:
        - contracts
        - total
        - hasMore
    CreateContractRequest:
      type: object
      properties:
        startDate:
          type: string
          description: The start date of the contract
          format: date-time
        endDate:
          type: string
          description: The end date of the contract
          format: date-time
        customerId:
          type: string
          pattern: ^[0-9a-fA-F]{24}$
          description: The id of the customer that the contract is associated with
        planId:
          type: string
          pattern: ^[0-9a-fA-F]{24}$
          description: The id of the plan that the contract is associated with
      required:
        - startDate
        - customerId
        - planId
    CreateContractResponse:
      type: object
      properties:
        contract:
          type: object
          properties:
            startDate:
              type: string
              description: The start date of the contract
              format: date-time
            endDate:
              type: string
              description: The end date of the contract
              format: date-time
            customerId:
              type: string
              pattern: ^[0-9a-fA-F]{24}$
              description: The id of the customer that the contract is associated with
            planId:
              type: string
              pattern: ^[0-9a-fA-F]{24}$
              description: The id of the plan that the contract is associated with
            id:
              type: string
            createdAt:
              type: string
              format: date-time
            updatedAt:
              type: string
              format: date-time
          required:
            - startDate
            - customerId
            - planId
            - id
            - createdAt
            - updatedAt
      required:
        - contract
    LineItem:
      type: object
      properties:
        invoiceId:
          type: string
          pattern: ^[0-9a-fA-F]{24}$
          description: The id of the invoice that the line item is a part of
        revenueBreakdown:
          type: object
          properties:
            total:
              type: number
            subtotal:
              type: number
            overage:
              type: number
            discount:
              type: number
            creditsUsed:
              type: number
            tax:
              type: number
              minimum: 0
          required:
            - total
            - subtotal
            - overage
            - discount
            - creditsUsed
            - tax
          description: The revenue breakdown of the line item
      required:
        - invoiceId
        - revenueBreakdown
    GetInvoiceResponse:
      type: object
      properties:
        invoice:
          type: object
          properties:
            customerId:
              type: string
              pattern: ^[0-9a-fA-F]{24}$
              description: The id of the customer that the invoice is associated with
            contractId:
              type: string
              pattern: ^[0-9a-fA-F]{24}$
              description: The id of the contract that the invoice is associated with
            name:
              type: string
              minLength: 1
              description: The name of the invoice, usually a description of the billing
                period
            billingCycle:
              allOf:
                - $ref: "#/components/schemas/FullDayPeriod"
                - description: The billing cycle of the invoice, consists of a start and end date
            lineItems:
              type: array
              items:
                $ref: "#/components/schemas/LineItem"
            amount:
              type: number
              description: The total amount of the invoice
            id:
              type: string
            createdAt:
              type: string
              format: date-time
            updatedAt:
              type: string
              format: date-time
          required:
            - customerId
            - name
            - billingCycle
            - lineItems
            - amount
            - id
            - createdAt
            - updatedAt
      required:
        - invoice
    UpdateInvoiceRequest:
      type: object
      properties:
        customerId:
          type: string
          pattern: ^[0-9a-fA-F]{24}$
          description: The id of the customer that the invoice is associated with
        contractId:
          type: string
          pattern: ^[0-9a-fA-F]{24}$
          description: The id of the contract that the invoice is associated with
        name:
          type: string
          minLength: 1
          description: The name of the invoice, usually a description of the billing period
        billingCycle:
          allOf:
            - $ref: "#/components/schemas/FullDayPeriod"
            - description: The billing cycle of the invoice, consists of a start and end date
        lineItems:
          type: array
          items:
            $ref: "#/components/schemas/LineItem"
        amount:
          type: number
          description: The total amount of the invoice
      additionalProperties: false
    UpdateInvoiceResponse:
      type: object
      properties:
        invoice:
          type: object
          properties:
            customerId:
              type: string
              pattern: ^[0-9a-fA-F]{24}$
              description: The id of the customer that the invoice is associated with
            contractId:
              type: string
              pattern: ^[0-9a-fA-F]{24}$
              description: The id of the contract that the invoice is associated with
            name:
              type: string
              minLength: 1
              description: The name of the invoice, usually a description of the billing
                period
            billingCycle:
              allOf:
                - $ref: "#/components/schemas/FullDayPeriod"
                - description: The billing cycle of the invoice, consists of a start and end date
            lineItems:
              type: array
              items:
                $ref: "#/components/schemas/LineItem"
            amount:
              type: number
              description: The total amount of the invoice
            id:
              type: string
            createdAt:
              type: string
              format: date-time
            updatedAt:
              type: string
              format: date-time
          required:
            - customerId
            - name
            - billingCycle
            - lineItems
            - amount
            - id
            - createdAt
            - updatedAt
      required:
        - invoice
    DeleteInvoiceResponse:
      type: object
      properties:
        invoice:
          type: object
          properties:
            customerId:
              type: string
              pattern: ^[0-9a-fA-F]{24}$
              description: The id of the customer that the invoice is associated with
            contractId:
              type: string
              pattern: ^[0-9a-fA-F]{24}$
              description: The id of the contract that the invoice is associated with
            name:
              type: string
              minLength: 1
              description: The name of the invoice, usually a description of the billing
                period
            billingCycle:
              allOf:
                - $ref: "#/components/schemas/FullDayPeriod"
                - description: The billing cycle of the invoice, consists of a start and end date
            lineItems:
              type: array
              items:
                $ref: "#/components/schemas/LineItem"
            amount:
              type: number
              description: The total amount of the invoice
            id:
              type: string
            createdAt:
              type: string
              format: date-time
            updatedAt:
              type: string
              format: date-time
            deletedAt:
              type: string
          required:
            - customerId
            - name
            - billingCycle
            - lineItems
            - amount
            - id
            - createdAt
            - updatedAt
            - deletedAt
      required:
        - invoice
    ListInvoicesResponse:
      type: object
      properties:
        invoices:
          type: array
          items:
            type: object
            properties:
              customerId:
                type: string
                pattern: ^[0-9a-fA-F]{24}$
                description: The id of the customer that the invoice is associated with
              contractId:
                type: string
                pattern: ^[0-9a-fA-F]{24}$
                description: The id of the contract that the invoice is associated with
              name:
                type: string
                minLength: 1
                description: The name of the invoice, usually a description of the billing
                  period
              billingCycle:
                allOf:
                  - $ref: "#/components/schemas/FullDayPeriod"
                  - description: The billing cycle of the invoice, consists of a start and end date
              lineItems:
                type: array
                items:
                  $ref: "#/components/schemas/LineItem"
              amount:
                type: number
                description: The total amount of the invoice
              id:
                type: string
              createdAt:
                type: string
                format: date-time
              updatedAt:
                type: string
                format: date-time
            required:
              - customerId
              - name
              - billingCycle
              - lineItems
              - amount
              - id
              - createdAt
              - updatedAt
        total:
          type: number
        hasMore:
          type: boolean
        nextCursor:
          type: string
      required:
        - invoices
        - total
        - hasMore
    CreateInvoiceRequest:
      type: object
      properties:
        customerId:
          type: string
          pattern: ^[0-9a-fA-F]{24}$
          description: The id of the customer that the invoice is associated with
        contractId:
          type: string
          pattern: ^[0-9a-fA-F]{24}$
          description: The id of the contract that the invoice is associated with
        name:
          type: string
          minLength: 1
          description: The name of the invoice, usually a description of the billing period
        billingCycle:
          allOf:
            - $ref: "#/components/schemas/FullDayPeriod"
            - description: The billing cycle of the invoice, consists of a start and end date
        lineItems:
          type: array
          items:
            $ref: "#/components/schemas/LineItem"
        amount:
          type: number
          description: The total amount of the invoice
      required:
        - customerId
        - name
        - billingCycle
        - lineItems
        - amount
    CreateInvoiceResponse:
      type: object
      properties:
        invoice:
          type: object
          properties:
            customerId:
              type: string
              pattern: ^[0-9a-fA-F]{24}$
              description: The id of the customer that the invoice is associated with
            contractId:
              type: string
              pattern: ^[0-9a-fA-F]{24}$
              description: The id of the contract that the invoice is associated with
            name:
              type: string
              minLength: 1
              description: The name of the invoice, usually a description of the billing
                period
            billingCycle:
              allOf:
                - $ref: "#/components/schemas/FullDayPeriod"
                - description: The billing cycle of the invoice, consists of a start and end date
            lineItems:
              type: array
              items:
                $ref: "#/components/schemas/LineItem"
            amount:
              type: number
              description: The total amount of the invoice
            id:
              type: string
            createdAt:
              type: string
              format: date-time
            updatedAt:
              type: string
              format: date-time
          required:
            - customerId
            - name
            - billingCycle
            - lineItems
            - amount
            - id
            - createdAt
            - updatedAt
      required:
        - invoice
    LoginRequest:
      type: object
      properties:
        refreshToken:
          type: string
          description: The refresh token issued for the authentication process. It is
            required to obtain a new access token.
      required:
        - refreshToken
    LoginResponse:
      type: object
      properties:
        accessToken:
          type: string
          description: The new access token to be used for subsequent API calls. It is set
            to expire every hour.
      required:
        - accessToken
    Event:
      type: object
      properties:
        name:
          type: string
          description: The distinctive label assigned to an event, serving as a critical
            identifier for categorizing and pricing events within the system's
            backend infrastructure.
          example: api_call
        timestamp:
          type: string
          description: The temporal marker denoting the exact moment of event occurrence.
            The timestamp is formatted as an ISO 8601 string and is expressed in
            Coordinated Universal Time (UTC). i.e. YYYY-MM-DDTHH:MM:SS.SSSZ
          format: date-time
          example: 2023-09-13T18:25:43.511Z
        customerAlias:
          type: string
          minLength: 1
          description: A pseudonymous or otherwise obfuscated identifier uniquely assigned
            to each customer.
          example: customer_12345
        ref:
          type: string
          description: A universally unique identifier (UUID) or other form of
            high-entropy string serving as an immutable reference for each event
            entry.
          example: 4f6cf35x-2c4y-483z-a0a9-158621f77a21
        data:
          type: object
          nullable: true
          additionalProperties:
            nullable: true
          description: A schema-less JSON object encapsulating miscellaneous attributes
            and metrics associated with the event.
          example:
            key1: processing_duration
            key2: api_url
      required:
        - name
        - timestamp
        - customerAlias
        - ref
    EventsDryRunRequest:
      type: object
      properties:
        events:
          type: array
          items:
            $ref: "#/components/schemas/Event"
          minItems: 1
          maxItems: 1000
      required:
        - events
    Meter:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          description: The name of the meter
        eventName:
          type: string
          minLength: 1
          description: The name of the event that the meter is tracking.
        aggregationMethod:
          $ref: "#/components/schemas/AggregationMethod"
        filter:
          $ref: "#/components/schemas/Filter"
        pricing:
          $ref: "#/components/schemas/Pricing"
      required:
        - name
        - eventName
        - aggregationMethod
    EventsDryRunResponseObject:
      type: object
      properties:
        event:
          type: object
          properties:
            timestamp:
              type: string
              format: date-time
            customerAlias:
              type: string
              minLength: 1
            accountId:
              type: string
              pattern: ^[0-9a-fA-F]{24}$
            data:
              type: object
              nullable: true
              additionalProperties:
                nullable: true
            ref:
              type: string
            name:
              type: string
          required:
            - timestamp
            - customerAlias
            - accountId
            - ref
            - name
        matchedCustomer:
          type: string
          nullable: true
        meterWithValues:
          type: array
          items:
            allOf:
              - $ref: "#/components/schemas/Meter"
              - type: object
                properties:
                  value:
                    type: number
                  instanceValue:
                    nullable: true
                required:
                  - value
      required:
        - event
        - meterWithValues
    EventsDryRunResponse:
      type: object
      properties:
        events:
          type: array
          items:
            $ref: "#/components/schemas/EventsDryRunResponseObject"
      required:
        - events
    QueryEventsResponse:
      type: object
      properties:
        events:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
                description: The distinctive label assigned to an event, serving as a critical
                  identifier for categorizing and pricing events within the
                  system's backend infrastructure.
                example: api_call
              timestamp:
                type: string
                description: The temporal marker denoting the exact moment of event occurrence.
                  The timestamp is formatted as an ISO 8601 string and is
                  expressed in Coordinated Universal Time (UTC). i.e.
                  YYYY-MM-DDTHH:MM:SS.SSSZ
                format: date-time
                example: 2023-09-13T18:25:43.511Z
              customerAlias:
                type: string
                minLength: 1
                description: A pseudonymous or otherwise obfuscated identifier uniquely assigned
                  to each customer.
                example: customer_12345
              ref:
                type: string
                description: A universally unique identifier (UUID) or other form of
                  high-entropy string serving as an immutable reference for each
                  event entry.
                example: 4f6cf35x-2c4y-483z-a0a9-158621f77a21
              data:
                type: object
                nullable: true
                additionalProperties:
                  nullable: true
                description: A schema-less JSON object encapsulating miscellaneous attributes
                  and metrics associated with the event.
                example:
                  key1: processing_duration
                  key2: api_url
              id:
                type: string
              createdAt:
                type: string
                format: date-time
              updatedAt:
                type: string
                format: date-time
            required:
              - name
              - timestamp
              - customerAlias
              - ref
              - id
              - createdAt
              - updatedAt
          description: An array of events matching the query criteria
      required:
        - events
    SendEventsRequest:
      type: object
      properties:
        events:
          type: array
          items:
            $ref: "#/components/schemas/Event"
          minItems: 1
          maxItems: 1000
      required:
        - events
    InvalidEvent:
      type: object
      properties:
        event:
          $ref: "#/components/schemas/Event"
        error:
          type: string
          description: The error message indicating the reason the event failed validation.
          example: Event ref already exists.
      required:
        - event
        - error
    SendEventsResponse:
      type: object
      properties:
        validEvents:
          type: array
          items:
            $ref: "#/components/schemas/Event"
          description: An array of events that were successfully processed and sent to the
            queue.
        invalidEvents:
          type: array
          items:
            $ref: "#/components/schemas/InvalidEvent"
          description: An array of events that failed validation and were not sent to the
            queue. Each object contains the event and the error message.
      required:
        - validEvents
        - invalidEvents
    GetEventResponse:
      type: object
      properties:
        event:
          type: object
          properties:
            name:
              type: string
              description: The distinctive label assigned to an event, serving as a critical
                identifier for categorizing and pricing events within the
                system's backend infrastructure.
              example: api_call
            timestamp:
              type: string
              description: The temporal marker denoting the exact moment of event occurrence.
                The timestamp is formatted as an ISO 8601 string and is
                expressed in Coordinated Universal Time (UTC). i.e.
                YYYY-MM-DDTHH:MM:SS.SSSZ
              format: date-time
              example: 2023-09-13T18:25:43.511Z
            customerAlias:
              type: string
              minLength: 1
              description: A pseudonymous or otherwise obfuscated identifier uniquely assigned
                to each customer.
              example: customer_12345
            ref:
              type: string
              description: A universally unique identifier (UUID) or other form of
                high-entropy string serving as an immutable reference for each
                event entry.
              example: 4f6cf35x-2c4y-483z-a0a9-158621f77a21
            data:
              type: object
              nullable: true
              additionalProperties:
                nullable: true
              description: A schema-less JSON object encapsulating miscellaneous attributes
                and metrics associated with the event.
              example:
                key1: processing_duration
                key2: api_url
            id:
              type: string
            createdAt:
              type: string
              format: date-time
            updatedAt:
              type: string
              format: date-time
          required:
            - name
            - timestamp
            - customerAlias
            - ref
            - id
            - createdAt
            - updatedAt
          description: The event matching the provided refId
      required:
        - event
    DeleteEventResponse:
      type: object
      properties:
        event:
          type: object
          properties:
            name:
              type: string
              description: The distinctive label assigned to an event, serving as a critical
                identifier for categorizing and pricing events within the
                system's backend infrastructure.
              example: api_call
            timestamp:
              type: string
              description: The temporal marker denoting the exact moment of event occurrence.
                The timestamp is formatted as an ISO 8601 string and is
                expressed in Coordinated Universal Time (UTC). i.e.
                YYYY-MM-DDTHH:MM:SS.SSSZ
              format: date-time
              example: 2023-09-13T18:25:43.511Z
            customerAlias:
              type: string
              minLength: 1
              description: A pseudonymous or otherwise obfuscated identifier uniquely assigned
                to each customer.
              example: customer_12345
            ref:
              type: string
              description: A universally unique identifier (UUID) or other form of
                high-entropy string serving as an immutable reference for each
                event entry.
              example: 4f6cf35x-2c4y-483z-a0a9-158621f77a21
            data:
              type: object
              nullable: true
              additionalProperties:
                nullable: true
              description: A schema-less JSON object encapsulating miscellaneous attributes
                and metrics associated with the event.
              example:
                key1: processing_duration
                key2: api_url
            id:
              type: string
            createdAt:
              type: string
              format: date-time
            updatedAt:
              type: string
              format: date-time
            deletedAt:
              type: string
          required:
            - name
            - timestamp
            - customerAlias
            - ref
            - id
            - createdAt
            - updatedAt
            - deletedAt
          description: The event matching the provided refId
      required:
        - event
    ContractStatus:
      type: string
      enum:
        - Active
        - Inactive
        - Expired
        - Terminated
        - PendingTermination
        - Error
    Currency:
      type: string
      enum:
        - USD
        - EUR
        - GBP
        - ILS
    GetProductsUsageReportResponse:
      type: object
      properties:
        contractStatus:
          $ref: "#/components/schemas/ContractStatus"
        customerName:
          type: string
        startDate:
          type: string
          format: date-time
        endDate:
          type: string
          format: date-time
        contractName:
          type: string
        contractStartDate:
          type: string
          format: date-time
        contractEndDate:
          type: string
          format: date-time
        daysToContractEnd:
          type: number
        productVariantName:
          type: string
        commitmentConsumptionPercentage:
          type: number
        totalCommitmentCurrencyAmount:
          type: number
        totalCommitmentUnitsAmount:
          type: number
        commercialTermsAmount:
          type: number
        erpId:
          type: string
        currency:
          $ref: "#/components/schemas/Currency"
        usageConsumptionCurrencyAmount:
          type: number
        usageConsumptionUnitsAmount:
          type: number
      required:
        - contractStatus
        - customerName
        - startDate
        - endDate
        - contractStartDate
        - productVariantName
        - currency
    GetCommitmentReportResponse:
      type: object
      properties:
        contractStatus:
          $ref: "#/components/schemas/ContractStatus"
        customerName:
          type: string
        startDate:
          type: string
          format: date-time
        endDate:
          type: string
          format: date-time
        contractName:
          type: string
        contractStartDate:
          type: string
          format: date-time
        contractEndDate:
          type: string
          format: date-time
        daysToContractEnd:
          type: number
        productVariantName:
          type: string
        commitmentConsumptionCurrencyAmount:
          type: number
        commitmentConsumptionUnitsAmount:
          type: number
        commitmentConsumptionPercentage:
          type: number
        totalCommitmentCurrencyAmount:
          type: number
        totalCommitmentUnitsAmount:
          type: number
        commercialTermsAmount:
          type: number
        erpId:
          type: string
        currency:
          $ref: "#/components/schemas/Currency"
      required:
        - contractStatus
        - customerName
        - startDate
        - endDate
        - contractStartDate
        - productVariantName
        - commitmentConsumptionCurrencyAmount
        - commitmentConsumptionUnitsAmount
        - commitmentConsumptionPercentage
        - totalCommitmentCurrencyAmount
        - totalCommitmentUnitsAmount
        - currency
    NetSuiteSyncInvoicesRequest:
      type: object
      properties:
        integrationType:
          type: string
          enum:
            - upsertInvoice
        uid:
          type: string
        data:
          type: object
          properties:
            startDate:
              type: string
              format: date-time
            endDate:
              type: string
              format: date-time
            tranDate:
              type: string
              format: date-time
            memo:
              type: string
            externalId:
              type: string
              pattern: ^[0-9a-fA-F]{24}$
            entity:
              type: object
              properties:
                id:
                  type: string
              required:
                - id
            account:
              type: object
              properties:
                id:
                  type: string
              required:
                - id
            item:
              type: object
              properties:
                items:
                  type: array
                  items:
                    type: object
                    properties:
                      item:
                        type: object
                        properties:
                          id:
                            type: string
                        required:
                          - id
                      quantity:
                        type: number
                      amount:
                        type: number
                      description:
                        type: string
                      memo:
                        type: string
                    required:
                      - item
                      - quantity
                      - amount
              required:
                - items
            discountItem:
              type: object
              properties:
                id:
                  type: string
              required:
                - id
            discountRate:
              type: number
          required:
            - startDate
            - endDate
            - tranDate
            - memo
            - externalId
            - entity
            - item
      required:
        - integrationType
        - uid
        - data
    NetSuiteSyncInvoicesResponse:
      type: object
      properties:
        recordId:
          type: string
        tranId:
          type: string
      required:
        - recordId
        - tranId
    NetSuiteExportSalesOrderRequest:
      type: object
      properties:
        contractId:
          type: string
          pattern: ^[0-9a-fA-F]{24}$
        productsIds:
          type: array
          items:
            type: string
            pattern: ^[0-9a-fA-F]{24}$
        subsidiaryId:
          type: string
      required:
        - contractId
        - productsIds
        - subsidiaryId
    BillingCycleStatus:
      type: string
      enum:
        - Grant
        - Deduct
    CreditLedgerEntry:
      type: object
      properties:
        type:
          $ref: "#/components/schemas/BillingCycleStatus"
        amount:
          type: number
        invoiceId:
          type: string
        balanceAfterEntry:
          type: number
      required:
        - type
        - amount
        - balanceAfterEntry
    ListCreditLedgerEntriesResponse:
      type: object
      properties:
        entries:
          type: array
          items:
            $ref: "#/components/schemas/CreditLedgerEntry"
          description: The credit ledger entries for the customer.
      required:
        - entries
    GrantCreditsRequest:
      type: object
      properties:
        creditAmount:
          type: number
          description: The amount of credits to be granted to the user.
        customerId:
          type: string
          pattern: ^[0-9a-fA-F]{24}$
          description: The ID of the customer to whom the credits will be granted.
      required:
        - creditAmount
        - customerId
    DeductCreditsRequest:
      type: object
      properties:
        creditAmount:
          type: number
          description: The amount of credits to be deducted from the user.
        customerId:
          type: string
          pattern: ^[0-9a-fA-F]{24}$
          description: The ID of the customer to whom the credits will be deducted from.
      required:
        - creditAmount
        - customerId
    NotificationEventType:
      type: string
      enum:
        - AnonymousCustomer
        - Overage
        - UpcomingRenewal
        - InvoiceApproved
        - CustomerPortalLinkSent
    WebhookSubscribeRequest:
      type: object
      properties:
        callbackUrl:
          type: string
        eventType:
          $ref: "#/components/schemas/NotificationEventType"
      required:
        - callbackUrl
        - eventType
    ProductConsumption:
      type: object
      properties:
        productId:
          type: string
          pattern: ^[0-9a-fA-F]{24}$
          description: The id of the product.
        productName:
          type: string
          minLength: 1
        commitment:
          type: number
          minimum: 0
          description: The amount of the commitment on the product.
          example: 10
        consumption:
          type: number
          minimum: 0
          description: The amount of the product that been consumed.
          example: 10
        ratio:
          type: number
          minimum: 0
          description: The ratio of the consumption to the commitment.
          example: 1.5
      required:
        - productId
        - commitment
        - consumption
        - ratio
    GetCustomerProductsConsumptionsResponse:
      type: object
      properties:
        productsConsumptions:
          type: array
          items:
            $ref: "#/components/schemas/ProductConsumption"
      required:
        - productsConsumptions
    ApproveInvoiceResponse:
      type: object
      properties:
        invoiceId:
          type: string
          pattern: ^[0-9a-fA-F]{24}$
        approvedAt:
          type: string
          format: date-time
      required:
        - invoiceId
        - approvedAt
    shareInvoicesRequest:
      type: object
      properties:
        emailOverride:
          type: string
          format: email
        invoiceId:
          type: string
      required:
        - invoiceId
    ShareInvoicesRequest:
      type: array
      items:
        $ref: "#/components/schemas/shareInvoicesRequest"
    NewPlan:
      type: object
      properties:
        name:
          type: string
          minLength: 1
        description:
          type: string
          minLength: 1
        products:
          type: array
          items:
            allOf:
              - $ref: "#/components/schemas/NewProduct"
              - type: object
                properties: {}
          minItems: 1
        billingData:
          $ref: "#/components/schemas/PlanBillingData"
        status:
          $ref: "#/components/schemas/PlanStatus"
        basedFromPlanId:
          type: string
        trial:
          $ref: "#/components/schemas/PlanTrial"
        purchaseOrder:
          type: string
          maxLength: 20
        rawSyncData:
          type: object
          properties: {}
      required:
        - name
        - products
        - billingData
        - status
    ReviseContractRequest:
      type: object
      properties:
        plan:
          $ref: "#/components/schemas/NewPlan"
        startDate:
          type: string
          format: date-time
      required:
        - plan
        - startDate
    Limit:
      type: number
      maximum: 1000
      default: 10
    Cursor:
      type: string
    CustomerId:
      type: string
      pattern: ^[0-9a-fA-F]{24}$
    ProductId:
      type: string
      pattern: ^[0-9a-fA-F]{24}$
    MeasurementId:
      type: string
      pattern: ^[0-9a-fA-F]{24}$
    PlanId:
      type: string
      pattern: ^[0-9a-fA-F]{24}$
    ContractId:
      type: string
      pattern: ^[0-9a-fA-F]{24}$
    InvoiceId:
      type: string
      pattern: ^[0-9a-fA-F]{24}$
    StartTime:
      type: string
      format: date-time
    EndTime:
      type: string
      format: date-time
    EventName:
      type: string
      minLength: 1
    RefId:
      type: string
    ReportId:
      type: string
    ExternalId:
      type: string
paths:
  /customers:
    post:
      tags:
        - customers
      operationId: createCustomer
      description: Create a new Customer.
      summary: Create Customer
      security:
        - BearerAuthorizer: []
      requestBody:
        $ref: "#/components/requestBodies/CreateCustomerRequest"
      responses:
        "200":
          $ref: "#/components/responses/CreateCustomerResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
    get:
      tags:
        - customers
      operationId: listCustomers
      description: Get a list of Customers.
      summary: List Customers
      security:
        - BearerAuthorizer: []
      parameters:
        - schema:
            $ref: "#/components/schemas/Limit"
          required: false
          in: query
          name: limit
        - schema:
            $ref: "#/components/schemas/Cursor"
          required: false
          in: query
          name: cursor
      responses:
        "200":
          $ref: "#/components/responses/ListCustomersResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
  /customers/{customerId}:
    get:
      tags:
        - customers
      operationId: getCustomer
      description: Get a Customer by id.
      summary: Get Customer
      security:
        - BearerAuthorizer: []
      parameters:
        - schema:
            $ref: "#/components/schemas/CustomerId"
          required: true
          in: path
          name: customerId
      responses:
        "200":
          $ref: "#/components/responses/GetCustomerResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "404":
          description: Not Found
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
    put:
      tags:
        - customers
      operationId: updateCustomer
      description: Update a Customer by id.
      summary: Update Customer
      security:
        - BearerAuthorizer: []
      requestBody:
        $ref: "#/components/requestBodies/UpdateCustomerRequest"
      parameters:
        - schema:
            $ref: "#/components/schemas/CustomerId"
          required: true
          in: path
          name: customerId
      responses:
        "200":
          $ref: "#/components/responses/UpdateCustomerResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "404":
          description: Not Found
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
    delete:
      tags:
        - customers
      operationId: deleteCustomer
      description: Delete a Customer by id.
      summary: Delete Customer
      security:
        - BearerAuthorizer: []
      parameters:
        - schema:
            $ref: "#/components/schemas/CustomerId"
          required: true
          in: path
          name: customerId
      responses:
        "200":
          $ref: "#/components/responses/DeleteCustomerResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "404":
          description: Not Found
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
  /products/{productId}:
    get:
      tags:
        - meters
      operationId: getProduct
      description: Get a Product by id.
      summary: Get Product
      security:
        - BearerAuthorizer: []
      parameters:
        - schema:
            $ref: "#/components/schemas/ProductId"
          required: true
          in: path
          name: productId
      responses:
        "200":
          $ref: "#/components/responses/GetProductResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "404":
          description: Not Found
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
    put:
      tags:
        - meters
      operationId: updateProduct
      description: Update a Product by id.
      summary: Update Product
      security:
        - BearerAuthorizer: []
      requestBody:
        $ref: "#/components/requestBodies/UpdateProductRequest"
      parameters:
        - schema:
            $ref: "#/components/schemas/ProductId"
          required: true
          in: path
          name: productId
      responses:
        "200":
          $ref: "#/components/responses/UpdateProductResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "404":
          description: Not Found
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
    delete:
      tags:
        - meters
      operationId: deleteProduct
      description: Delete a Product by id.
      summary: Delete Product
      security:
        - BearerAuthorizer: []
      parameters:
        - schema:
            $ref: "#/components/schemas/ProductId"
          required: true
          in: path
          name: productId
      responses:
        "200":
          $ref: "#/components/responses/DeleteProductResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "404":
          description: Not Found
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
  /products:
    get:
      tags:
        - meters
      operationId: listProducts
      description: Get a list of Products.
      summary: List Products
      security:
        - BearerAuthorizer: []
      parameters:
        - schema:
            $ref: "#/components/schemas/Limit"
          required: false
          in: query
          name: limit
        - schema:
            $ref: "#/components/schemas/Cursor"
          required: false
          in: query
          name: cursor
      responses:
        "200":
          $ref: "#/components/responses/ListProductsResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
    post:
      tags:
        - meters
      operationId: createProduct
      description: Create a new Product.
      summary: Create Product
      security:
        - BearerAuthorizer: []
      requestBody:
        $ref: "#/components/requestBodies/CreateProductRequest"
      responses:
        "200":
          $ref: "#/components/responses/CreateProductResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
  /measurements/{measurementId}:
    get:
      tags:
        - measurements
      operationId: getMeasurement
      description: Get a Measurement by id.
      summary: Get Measurement
      security:
        - BearerAuthorizer: []
      parameters:
        - schema:
            $ref: "#/components/schemas/MeasurementId"
          required: true
          in: path
          name: measurementId
      responses:
        "200":
          $ref: "#/components/responses/GetMeasurementResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "404":
          description: Not Found
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
    put:
      tags:
        - measurements
      operationId: updateMeasurement
      description: Update a Measurement by id.
      summary: Update Measurement
      security:
        - BearerAuthorizer: []
      requestBody:
        $ref: "#/components/requestBodies/UpdateMeasurementRequest"
      parameters:
        - schema:
            $ref: "#/components/schemas/MeasurementId"
          required: true
          in: path
          name: measurementId
      responses:
        "200":
          $ref: "#/components/responses/UpdateMeasurementResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "404":
          description: Not Found
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
    delete:
      tags:
        - measurements
      operationId: deleteMeasurement
      description: Delete a Measurement by id.
      summary: Delete Measurement
      security:
        - BearerAuthorizer: []
      parameters:
        - schema:
            $ref: "#/components/schemas/MeasurementId"
          required: true
          in: path
          name: measurementId
      responses:
        "200":
          $ref: "#/components/responses/DeleteMeasurementResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "404":
          description: Not Found
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
  /measurements:
    get:
      tags:
        - measurements
      operationId: listMeasurements
      description: Get a list of Measurements.
      summary: List Measurements
      security:
        - BearerAuthorizer: []
      parameters:
        - schema:
            $ref: "#/components/schemas/Limit"
          required: false
          in: query
          name: limit
        - schema:
            $ref: "#/components/schemas/Cursor"
          required: false
          in: query
          name: cursor
      responses:
        "200":
          $ref: "#/components/responses/ListMeasurementsResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
    post:
      tags:
        - measurements
      operationId: createMeasurement
      description: Create a new Measurement.
      summary: Create Measurement
      security:
        - BearerAuthorizer: []
      requestBody:
        $ref: "#/components/requestBodies/CreateMeasurementRequest"
      responses:
        "200":
          $ref: "#/components/responses/CreateMeasurementResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
  /plans/{planId}:
    get:
      tags:
        - plans
      operationId: getPlan
      description: Get a Plan by id.
      summary: Get Plan
      security:
        - BearerAuthorizer: []
      parameters:
        - schema:
            $ref: "#/components/schemas/PlanId"
          required: true
          in: path
          name: planId
      responses:
        "200":
          $ref: "#/components/responses/GetPlanResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "404":
          description: Not Found
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
    put:
      tags:
        - plans
      operationId: updatePlan
      description: Update a Plan by id.
      summary: Update Plan
      security:
        - BearerAuthorizer: []
      requestBody:
        $ref: "#/components/requestBodies/UpdatePlanRequest"
      parameters:
        - schema:
            $ref: "#/components/schemas/PlanId"
          required: true
          in: path
          name: planId
      responses:
        "200":
          $ref: "#/components/responses/UpdatePlanResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "404":
          description: Not Found
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
    delete:
      tags:
        - plans
      operationId: deletePlan
      description: Delete a Plan by id.
      summary: Delete Plan
      security:
        - BearerAuthorizer: []
      parameters:
        - schema:
            $ref: "#/components/schemas/PlanId"
          required: true
          in: path
          name: planId
      responses:
        "200":
          $ref: "#/components/responses/DeletePlanResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "404":
          description: Not Found
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
  /plans:
    get:
      tags:
        - plans
      operationId: listPlans
      description: Get a list of Plans.
      summary: List Plans
      security:
        - BearerAuthorizer: []
      parameters:
        - schema:
            $ref: "#/components/schemas/Limit"
          required: false
          in: query
          name: limit
        - schema:
            $ref: "#/components/schemas/Cursor"
          required: false
          in: query
          name: cursor
      responses:
        "200":
          $ref: "#/components/responses/ListPlansResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
    post:
      tags:
        - plans
      operationId: createPlan
      description: Create a new Plan.
      summary: Create Plan
      security:
        - BearerAuthorizer: []
      requestBody:
        $ref: "#/components/requestBodies/CreatePlanRequest"
      responses:
        "200":
          $ref: "#/components/responses/CreatePlanResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
  /contracts/{contractId}:
    get:
      tags:
        - contracts
      operationId: getContract
      description: Get a Contract by id.
      summary: Get Contract
      security:
        - BearerAuthorizer: []
      parameters:
        - schema:
            $ref: "#/components/schemas/ContractId"
          required: true
          in: path
          name: contractId
      responses:
        "200":
          $ref: "#/components/responses/GetContractResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "404":
          description: Not Found
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
    put:
      tags:
        - contracts
      operationId: updateContract
      description: Update a Contract by id.
      summary: Update Contract
      security:
        - BearerAuthorizer: []
      requestBody:
        $ref: "#/components/requestBodies/UpdateContractRequest"
      parameters:
        - schema:
            $ref: "#/components/schemas/ContractId"
          required: true
          in: path
          name: contractId
      responses:
        "200":
          $ref: "#/components/responses/UpdateContractResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "404":
          description: Not Found
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
    delete:
      tags:
        - contracts
      operationId: deleteContract
      description: Delete a Contract by id.
      summary: Delete Contract
      security:
        - BearerAuthorizer: []
      parameters:
        - schema:
            $ref: "#/components/schemas/ContractId"
          required: true
          in: path
          name: contractId
      responses:
        "200":
          $ref: "#/components/responses/DeleteContractResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "404":
          description: Not Found
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
  /contracts:
    get:
      tags:
        - contracts
      operationId: listContracts
      description: Get a list of Contracts.
      summary: List Contracts
      security:
        - BearerAuthorizer: []
      parameters:
        - schema:
            $ref: "#/components/schemas/Limit"
          required: false
          in: query
          name: limit
        - schema:
            $ref: "#/components/schemas/Cursor"
          required: false
          in: query
          name: cursor
      responses:
        "200":
          $ref: "#/components/responses/ListContractsResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
    post:
      tags:
        - contracts
      operationId: createContract
      description: Create a new Contract.
      summary: Create Contract
      security:
        - BearerAuthorizer: []
      requestBody:
        $ref: "#/components/requestBodies/CreateContractRequest"
      responses:
        "200":
          $ref: "#/components/responses/CreateContractResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
  /invoices/{invoiceId}:
    get:
      tags:
        - invoices
      operationId: getInvoice
      description: Get a Invoice by id.
      summary: Get Invoice
      security:
        - BearerAuthorizer: []
      parameters:
        - schema:
            $ref: "#/components/schemas/InvoiceId"
          required: true
          in: path
          name: invoiceId
      responses:
        "200":
          $ref: "#/components/responses/GetInvoiceResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "404":
          description: Not Found
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
    put:
      tags:
        - invoices
      operationId: updateInvoice
      description: Update a Invoice by id.
      summary: Update Invoice
      security:
        - BearerAuthorizer: []
      requestBody:
        $ref: "#/components/requestBodies/UpdateInvoiceRequest"
      parameters:
        - schema:
            $ref: "#/components/schemas/InvoiceId"
          required: true
          in: path
          name: invoiceId
      responses:
        "200":
          $ref: "#/components/responses/UpdateInvoiceResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "404":
          description: Not Found
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
    delete:
      tags:
        - invoices
      operationId: deleteInvoice
      description: Delete a Invoice by id.
      summary: Delete Invoice
      security:
        - BearerAuthorizer: []
      parameters:
        - schema:
            $ref: "#/components/schemas/InvoiceId"
          required: true
          in: path
          name: invoiceId
      responses:
        "200":
          $ref: "#/components/responses/DeleteInvoiceResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "404":
          description: Not Found
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
  /invoices:
    get:
      tags:
        - invoices
      operationId: listInvoices
      description: Get a list of Invoices.
      summary: List Invoices
      security:
        - BearerAuthorizer: []
      parameters:
        - schema:
            $ref: "#/components/schemas/Limit"
          required: false
          in: query
          name: limit
        - schema:
            $ref: "#/components/schemas/Cursor"
          required: false
          in: query
          name: cursor
      responses:
        "200":
          $ref: "#/components/responses/ListInvoicesResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
    post:
      tags:
        - invoices
      operationId: createInvoice
      description: Create a new Invoice.
      summary: Create Invoice
      security:
        - BearerAuthorizer: []
      requestBody:
        $ref: "#/components/requestBodies/CreateInvoiceRequest"
      responses:
        "200":
          $ref: "#/components/responses/CreateInvoiceResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
  /login:
    post:
      tags:
        - auth
      operationId: login
      description: >-
        This endpoint is designed to acquire a temporary access token.
            Submit the auth token in the request body to obtain a new access token.
            Use this new token for subsequent API calls. Token is set to expire every hour.
      summary: Login by obtaining a new access token
      requestBody:
        $ref: "#/components/requestBodies/LoginRequest"
      responses:
        "200":
          $ref: "#/components/responses/LoginResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
  /events/dry-run:
    post:
      tags:
        - events
      operationId: sendEventsDryRun
      description: "Use this endpoint to send an array of events for processing. Make
        sure to comply with the request schema for each event. NOTE: this is a
        dry run and will not result in actual storage of the events."
      summary: Submit a batch of events for testing
      security:
        - BearerAuthorizer: []
      requestBody:
        $ref: "#/components/requestBodies/EventsDryRunRequest"
      responses:
        "200":
          $ref: "#/components/responses/EventsDryRunResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "413":
          description: Request Entity Too Large
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
  /events:
    get:
      tags:
        - events
      operationId: queryEvents
      description: Fetch events occurring within a specified timestamp range. An
        optional event name can be provided to further filter the events.
      summary: Query events by timestamp period and optional event name
      security:
        - BearerAuthorizer: []
      parameters:
        - schema:
            $ref: "#/components/schemas/StartTime"
          required: true
          in: query
          name: startTime
        - schema:
            $ref: "#/components/schemas/EndTime"
          required: true
          in: query
          name: endTime
        - schema:
            $ref: "#/components/schemas/EventName"
          required: false
          in: query
          name: eventName
        - schema:
            $ref: "#/components/schemas/Limit"
          required: false
          in: query
          name: limit
        - schema:
            $ref: "#/components/schemas/Cursor"
          required: false
          in: query
          name: cursor
      responses:
        "200":
          $ref: "#/components/responses/QueryEventsResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
    post:
      tags:
        - events
      operationId: sendEvents
      description: Use this endpoint to send an array of events for processing and
        storage. Make sure to comply with the request schema for each event.
      summary: Submit a batch of events for ingestion
      security:
        - BearerAuthorizer: []
      requestBody:
        $ref: "#/components/requestBodies/SendEventsRequest"
      responses:
        "200":
          $ref: "#/components/responses/SendEventsResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "413":
          description: Request Entity Too Large
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
  /events/{refId}:
    get:
      tags:
        - events
      operationId: getEventByRefId
      description: Use this endpoint to get a specific event using its reference ID.
      summary: Get event by refId
      security:
        - BearerAuthorizer: []
      parameters:
        - schema:
            $ref: "#/components/schemas/RefId"
          required: true
          in: path
          name: refId
      responses:
        "200":
          $ref: "#/components/responses/GetEventResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "404":
          description: Not Found
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
    delete:
      tags:
        - events
      operationId: deleteEventByRefId
      description: Use this endpoint to remove a specific event using its reference ID.
      summary: Delete an event by refId
      security:
        - BearerAuthorizer: []
      parameters:
        - schema:
            $ref: "#/components/schemas/RefId"
          required: true
          in: path
          name: refId
      responses:
        "200":
          $ref: "#/components/responses/DeleteEventResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "404":
          description: Not Found
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
  /report/products-usage:
    get:
      tags:
        - reports
      operationId: getProductsUsageReport
      description: Use this endpoint to get the products usage report.
      summary: Get products usage report
      security:
        - BearerAuthorizer: []
      parameters:
        - schema:
            $ref: "#/components/schemas/ReportId"
          required: false
          in: query
          name: reportId
        - schema:
            $ref: "#/components/schemas/Limit"
          required: false
          in: query
          name: limit
        - schema:
            $ref: "#/components/schemas/Cursor"
          required: false
          in: query
          name: cursor
      responses:
        "200":
          $ref: "#/components/responses/GetProductsUsageReportResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
  /report/commitment:
    get:
      tags:
        - reports
      operationId: getCommitmentReportResponse
      summary: "Get commitment report "
      security:
        - BearerAuthorizer: []
      parameters:
        - schema:
            $ref: "#/components/schemas/ReportId"
          required: false
          in: query
          name: reportId
      responses:
        "200":
          $ref: "#/components/responses/GetCommitmentReportResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
  /integrations/netsuite/sync-invoices:
    post:
      tags:
        - integrations
      operationId: net-suite-sync-invoices
      description: This endpoint is used to sync invoices to NetSuite.
      summary: Sync invoices to NetSuite
      security:
        - BearerAuthorizer: []
      requestBody:
        $ref: "#/components/requestBodies/NetSuiteSyncInvoicesRequest"
      responses:
        "200":
          $ref: "#/components/responses/NetSuiteSyncInvoicesResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
  /integrations/netsuite/export-sales-order:
    post:
      tags:
        - integrations
      operationId: export-net-suite-sales-order
      description: This endpoint is used to export sales order to NetSuite.
      summary: Export sales order to NetSuite
      security:
        - BearerAuthorizer: []
      requestBody:
        $ref: "#/components/requestBodies/NetSuiteExportSalesOrderRequest"
      responses:
        "200":
          $ref: "#/components/responses/RequestSuccess"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
  /credits:
    get:
      tags:
        - credits
      operationId: listCreditLedgerEntries
      description: This endpoint is used to retrieve the credit ledger entries for a
        specific customer.
      summary: Retrieve credit ledger entries for customer.
      security:
        - BearerAuthorizer: []
      parameters:
        - schema:
            $ref: "#/components/schemas/CustomerId"
          required: true
          in: query
          name: customerId
        - schema:
            $ref: "#/components/schemas/Limit"
          required: false
          in: query
          name: limit
        - schema:
            $ref: "#/components/schemas/Cursor"
          required: false
          in: query
          name: cursor
      responses:
        "200":
          $ref: "#/components/responses/ListCreditLedgerEntriesResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
  /credits/grant:
    post:
      tags:
        - credits
      operationId: grantCredits
      description: >-
        This endpoint is used to grant credits to a customer.
            Submit the credit amount and customer ID in the request body to grant the credits.
            The granted credits will be added to the customer's account.
      summary: Grant credits to a customer credit ledger
      security:
        - BearerAuthorizer: []
      requestBody:
        $ref: "#/components/requestBodies/GrantCreditsRequest"
      responses:
        "200":
          $ref: "#/components/responses/RequestSuccess"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
  /credits/deduct:
    post:
      tags:
        - credits
      operationId: deductCredits
      description: >-
        This endpoint is used to deduct credits from the specified customer
        account. 
            Submit the credit amount and customer ID in the request body to deduct the credits. 
            The deducted credits will be subtracted from the customer's account.
      summary: Deduct credits from customer credit ledger
      security:
        - BearerAuthorizer: []
      requestBody:
        $ref: "#/components/requestBodies/DeductCreditsRequest"
      responses:
        "200":
          $ref: "#/components/responses/RequestSuccess"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
  /webhook:
    post:
      tags:
        - webhooks
      operationId: webhookSubscribe
      description: Use this endpoint to subscribe to webhooks and receive event
        notifications.
      summary: Subscribe to webhooks
      security:
        - BearerAuthorizer: []
      requestBody:
        $ref: "#/components/requestBodies/WebhookSubscribeRequest"
      responses:
        "200":
          $ref: "#/components/responses/RequestSuccess"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "413":
          description: Request Entity Too Large
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
  /customers/externalId/{externalId}:
    get:
      tags:
        - customers
      operationId: getCustomerByExternalId
      description: Use this endpoint to get a specific customer using its external Id.
      summary: Get customer by externalId
      security:
        - BearerAuthorizer: []
      parameters:
        - schema:
            $ref: "#/components/schemas/ExternalId"
          required: true
          in: path
          name: externalId
      responses:
        "200":
          $ref: "#/components/responses/GetCustomerResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "404":
          description: Not Found
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
  /customers/products-consumptions/{customerId}:
    get:
      tags:
        - customers
      operationId: getCustomerProductsConsumptions
      description: Use this endpoint to get the products consumptions by the customer id.
      summary: Get products consumptions by customer id
      security:
        - BearerAuthorizer: []
      parameters:
        - schema:
            $ref: "#/components/schemas/CustomerId"
          required: true
          in: path
          name: customerId
      responses:
        "200":
          $ref: "#/components/responses/GetCustomerProductsConsumptionsResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "404":
          description: Not Found
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
  /invoice/approve:
    post:
      tags:
        - invoices
      operationId: approveInvoice
      security:
        - BearerAuthorizer: []
      parameters:
        - schema:
            $ref: "#/components/schemas/InvoiceId"
          required: false
          in: query
          name: invoiceId
      responses:
        "200":
          $ref: "#/components/responses/ApproveInvoiceResponse"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
  /invoices/share:
    post:
      tags:
        - invoices
      operationId: shareInvoices
      security:
        - BearerAuthorizer: []
      requestBody:
        $ref: "#/components/requestBodies/ShareInvoicesRequest"
      responses:
        "200":
          $ref: "#/components/responses/RequestSuccess"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
  /contract/revise/{contractId}:
    post:
      tags:
        - contracts
      operationId: reviseContract
      security:
        - BearerAuthorizer: []
      requestBody:
        $ref: "#/components/requestBodies/ReviseContractRequest"
      parameters:
        - schema:
            $ref: "#/components/schemas/ContractId"
          required: true
          in: path
          name: contractId
      responses:
        "200":
          $ref: "#/components/responses/RequestSuccess"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "429":
          description: Too Many Requests
        "500":
          description: Internal Server Error
